<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>论文发表日程规划助手</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .input-section {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        
        select, input[type="date"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            background-color: white;
        }
        
        select:focus, input[type="date"]:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .result-section {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .timeline {
            margin-bottom: 30px;
        }
        
        .process-step {
            display: flex;
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #3498db;
        }
        
        .step-info {
            flex: 1;
        }
        
        .step-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .step-dates {
            color: #666;
            font-size: 14px;
        }
        
        .step-duration {
            color: #3498db;
            font-weight: bold;
            margin-left: 20px;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .calendar-month {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
        }
        
        .month-header {
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }
        
        .day-name {
            text-align: center;
            font-weight: bold;
            padding: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            font-size: 12px;
            color: #666;
        }
        
        .day {
            position: relative;
            height: 40px;
            padding: 5px;
            background-color: white;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .day:hover {
            background-color: #e3f2fd;
        }
        
        .day.empty {
            background-color: transparent;
            cursor: default;
        }
        
        .day.empty:hover {
            background-color: transparent;
        }
        
        .event {
            position: absolute;
            bottom: 2px;
            left: 2px;
            right: 2px;
            height: 6px;
            border-radius: 3px;
            font-size: 8px;
            text-align: center;
            color: white;
            line-height: 6px;
        }
        
        .event.kaiti {
            background-color: #3498db;
        }
        
        .event.shiyan {
            background-color: #2ecc71;
        }
        
        .event.data {
            background-color: #f39c12;
        }
        
        .event.writing {
            background-color: #9b59b6;
        }
        
        .event.tougao {
            background-color: #e74c3c;
        }
        
        .legend {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
        }
        
        .summary {
            background-color: #e8f4f8;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        .summary h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>论文发表日程规划助手</h1>
        
        <div class="input-section">
            <h2>输入论文信息</h2>
            <form id="paperForm">
                <div class="form-group">
                    <label for="discipline">学科类别</label>
                    <select id="discipline" required>
                        <option value="">请选择学科</option>
                        <option value="理科">理科（数学、物理、化学等）</option>
                        <option value="工科">工科（计算机、机械、电子等）</option>
                        <option value="文科">文科（历史、文学、哲学等）</option>
                        <option value="医科">医科（基础医学、临床医学等）</option>
                        <option value="社科">社科（经济学、社会学、管理学等）</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="journalLevel">预计发刊层次</label>
                    <select id="journalLevel" required>
                        <option value="">请选择发刊层次</option>
                        <option value="核心">核心期刊</option>
                        <option value="SCI">SCI期刊</option>
                        <option value="EI">EI期刊</option>
                        <option value="普刊">普通期刊</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="startDate">计划开始日期</label>
                    <input type="date" id="startDate" required>
                </div>
                
                <button type="submit">生成日程规划</button>
            </form>
        </div>
        
        <div class="result-section" id="resultSection" style="display: none;">
            <h2>论文发表日程规划</h2>
            
            <div class="summary" id="summary"></div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #3498db;"></div>
                    <span>开题阶段</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #2ecc71;"></div>
                    <span>实验/研究阶段</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #f39c12;"></div>
                    <span>数据分析阶段</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #9b59b6;"></div>
                    <span>论文写作阶段</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #e74c3c;"></div>
                    <span>投稿/修改阶段</span>
                </div>
            </div>
            
            <div class="timeline" id="timeline"></div>
            
            <h3>详细日历规划</h3>
            <div class="calendar-grid" id="calendarGrid"></div>
        </div>
    </div>
    
    <script>
        // 学科和发刊层次对应的总时间（天）
        const timeConfig = {
            '理科': {
                '核心': 365,
                'SCI': 540,
                'EI': 450,
                '普刊': 270
            },
            '工科': {
                '核心': 400,
                'SCI': 580,
                'EI': 480,
                '普刊': 300
            },
            '文科': {
                '核心': 300,
                'SCI': 450,
                'EI': 400,
                '普刊': 240
            },
            '医科': {
                '核心': 450,
                'SCI': 600,
                'EI': 500,
                '普刊': 320
            },
            '社科': {
                '核心': 330,
                'SCI': 480,
                'EI': 420,
                '普刊': 250
            }
        };
        
        // 各阶段时间分配比例（%）
        const phaseRatio = {
            'kaiti': 10,   // 开题
            'shiyan': 40,  // 实验/研究
            'data': 20,    // 数据分析
            'writing': 20, // 论文写作
            'tougao': 10   // 投稿/修改
        };
        
        // 阶段中文名称
        const phaseNames = {
            'kaiti': '开题阶段',
            'shiyan': '实验/研究阶段',
            'data': '数据分析阶段',
            'writing': '论文写作阶段',
            'tougao': '投稿/修改阶段'
        };
        
        // 格式化日期
        function formatDate(date) {
            return date.toISOString().split('T')[0];
        }
        
        // 添加天数到日期
        function addDays(date, days) {
            const result = new Date(date);
            result.setDate(result.getDate() + days);
            return result;
        }
        
        // 计算日期差（天）
        function getDaysDiff(start, end) {
            const timeDiff = end - start;
            return Math.ceil(timeDiff / (1000 * 3600 * 24));
        }
        
        // 生成阶段时间规划
        function generateSchedule(discipline, journalLevel, startDate) {
            const totalDays = timeConfig[discipline][journalLevel];
            const start = new Date(startDate);
            let currentDate = new Date(start);
            
            const schedule = [];
            
            // 计算各阶段时间
            Object.entries(phaseRatio).forEach(([phase, ratio]) => {
                const duration = Math.round(totalDays * ratio / 100);
                const endDate = addDays(currentDate, duration - 1);
                
                schedule.push({
                    phase: phase,
                    name: phaseNames[phase],
                    start: new Date(currentDate),
                    end: endDate,
                    duration: duration
                });
                
                currentDate = addDays(endDate, 1);
            });
            
            return {
                totalDays: totalDays,
                startDate: start,
                endDate: currentDate,
                phases: schedule
            };
        }
        
        // 渲染时间线
        function renderTimeline(schedule) {
            const timeline = document.getElementById('timeline');
            timeline.innerHTML = '';
            
            schedule.phases.forEach(phase => {
                const step = document.createElement('div');
                step.className = 'process-step';
                step.innerHTML = `
                    <div class="step-info">
                        <div class="step-title">${phase.name}</div>
                        <div class="step-dates">${formatDate(phase.start)} 至 ${formatDate(phase.end)}</div>
                    </div>
                    <div class="step-duration">${phase.duration}天</div>
                `;
                timeline.appendChild(step);
            });
        }
        
        // 生成日历
        function generateCalendar(startDate, endDate, schedule) {
            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';
            
            let current = new Date(startDate.getFullYear(), startDate.getMonth(), 1);
            const end = new Date(endDate.getFullYear(), endDate.getMonth() + 1, 0);
            
            while (current <= end) {
                const monthYear = current.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long' });
                const daysInMonth = new Date(current.getFullYear(), current.getMonth() + 1, 0).getDate();
                const firstDay = new Date(current.getFullYear(), current.getMonth(), 1).getDay();
                
                const monthDiv = document.createElement('div');
                monthDiv.className = 'calendar-month';
                monthDiv.innerHTML = `
                    <div class="month-header">${monthYear}</div>
                    <div class="calendar-days">
                        <div class="day-name">日</div>
                        <div class="day-name">一</div>
                        <div class="day-name">二</div>
                        <div class="day-name">三</div>
                        <div class="day-name">四</div>
                        <div class="day-name">五</div>
                        <div class="day-name">六</div>
                    </div>
                `;
                
                const daysContainer = monthDiv.querySelector('.calendar-days');
                
                // 添加空白单元格
                for (let i = 0; i < firstDay; i++) {
                    const emptyDay = document.createElement('div');
                    emptyDay.className = 'day empty';
                    daysContainer.appendChild(emptyDay);
                }
                
                // 添加日期单元格
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayDate = new Date(current.getFullYear(), current.getMonth(), day);
                    const dayDiv = document.createElement('div');
                    dayDiv.className = 'day';
                    dayDiv.textContent = day;
                    
                    // 检查该日期属于哪个阶段
                    schedule.phases.forEach(phase => {
                        if (dayDate >= phase.start && dayDate <= phase.end) {
                            const event = document.createElement('div');
                            event.className = `event ${phase.phase}`;
                            dayDiv.appendChild(event);
                        }
                    });
                    
                    daysContainer.appendChild(dayDiv);
                }
                
                calendarGrid.appendChild(monthDiv);
                
                // 下一个月
                current.setMonth(current.getMonth() + 1);
            }
        }
        
        // 渲染总结
        function renderSummary(schedule) {
            const summary = document.getElementById('summary');
            const totalMonths = Math.ceil(schedule.totalDays / 30);
            
            summary.innerHTML = `
                <h3>规划总结</h3>
                <p><strong>学科类别：</strong>${document.getElementById('discipline').value}</p>
                <p><strong>发刊层次：</strong>${document.getElementById('journalLevel').value}</p>
                <p><strong>总预计时长：</strong>${schedule.totalDays}天（约${totalMonths}个月）</p>
                <p><strong>开始日期：</strong>${formatDate(schedule.startDate)}</p>
                <p><strong>预计完成日期：</strong>${formatDate(schedule.endDate)}</p>
            `;
        }
        
        // 表单提交处理
        document.getElementById('paperForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const discipline = document.getElementById('discipline').value;
            const journalLevel = document.getElementById('journalLevel').value;
            const startDate = document.getElementById('startDate').value;
            
            if (!discipline || !journalLevel || !startDate) {
                alert('请填写完整信息');
                return;
            }
            
            const schedule = generateSchedule(discipline, journalLevel, startDate);
            
            renderSummary(schedule);
            renderTimeline(schedule);
            generateCalendar(schedule.startDate, schedule.endDate, schedule);
            
            // 显示结果区域
            document.getElementById('resultSection').style.display = 'block';
            
            // 滚动到结果区域
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        });
        
        // 设置默认开始日期为今天
        document.getElementById('startDate').value = formatDate(new Date());
    </script>
</body>
</html>