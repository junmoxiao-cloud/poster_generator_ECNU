"use strict";(()=>{var e={};e.id=829,e.ids=[829],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1017:e=>{e.exports=require("path")},2404:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>d});var o={};r.r(o),r.d(o,{GET:()=>p});var n=r(9303),s=r(8716),i=r(670),a=r(7070),u=r(1617);async function p(e,{params:t}){try{let{id:e}=await t,r=(0,u.Qk)(e);if(!r)return a.NextResponse.json({error:"海报不存在"},{status:404});let o=null;if(r.copies)try{o=JSON.parse(r.copies)}catch{console.error("解析 copies 失败")}return a.NextResponse.json({id:r.id,title:r.title,time:r.time,location:r.location,organizer:r.organizer,description:r.description,join_url:r.join_url,poster_base64:r.poster_base64,copies:o,is_ecnu:r.is_ecnu,created_at:r.created_at})}catch(e){return console.error("获取失败:",e),a.NextResponse.json({error:"获取失败"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/posters/[id]/route",pathname:"/api/posters/[id]",filename:"route",bundlePath:"app/api/posters/[id]/route"},resolvedPagePath:"C:\\Users\\dou12\\Desktop\\乔钰成\\华东师范大学\\大一\\programming\\trae\\app\\api\\posters\\[id]\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:f}=c,g="/api/posters/[id]/route";function m(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:d})}},1617:(e,t,r)=>{let o,n;r.d(t,{uM:()=>f,Qk:()=>g,iW:()=>m,Ih:()=>h});let s=require("fs");var i=r.n(s),a=r(1017),u=r.n(a);let p=require("node:crypto"),c=u().join(process.cwd(),"posters.json");function l(){if(!i().existsSync(c))return{};try{let e=i().readFileSync(c,"utf-8");return JSON.parse(e)}catch{return{}}}function d(e){i().writeFileSync(c,JSON.stringify(e,null,2))}function f(e){let t=l(),r=function(e=21){var t;t=e|=0,!o||o.length<t?(o=Buffer.allocUnsafe(128*t),p.webcrypto.getRandomValues(o),n=0):n+t>o.length&&(p.webcrypto.getRandomValues(o),n=0),n+=t;let r="";for(let t=n-e;t<n;t++)r+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&o[t]];return r}(8);return t[r]={...e,id:r,created_at:new Date().toISOString()},d(t),r}function g(e){return l()[e]||null}function m(e,t){let r=l();r[e]&&(r[e].poster_base64=t,d(r))}function h(e,t){let r=l();r[e]&&(r[e].copies=t,d(r))}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[948,972],()=>r(2404));module.exports=o})();